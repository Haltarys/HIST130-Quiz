import{r as d,j as e,c as T,i as I,b as L,a as R,u as m,Q as N,T as l,d as x,e as c,f as Q,g as f,L as u,h as B,k as g,I as b,l as H,A as D,m as O,n as E,o as j,p as $,S as q,G as p,C as A,q as P,s as M,t as G,v as _,w as J,x as W,F as y,y as K,R as h,z as V,B as U,D as X,E as Y,H as Z,J as ee,K as re}from"./vendor.477bdf2e.js";const te=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};te();function ne(){return JSON.parse(localStorage.getItem("HIST130-Quiz")||"{}").favourites||[]}function oe(r){localStorage.setItem("HIST130-Quiz",JSON.stringify({favourites:r}))}function ie(r,t){let n=r;switch(t.type){case"add":r.includes(t.id)||(n=[...r,t.id]);break;case"remove":n=r.filter(o=>o!==t.id);break;case"clear":n=[];break;default:throw new Error("Error updating the favourites")}return Promise.resolve().then(()=>oe(n)),n}function ae(){const[r,t]=d.exports.useReducer(ie,ne());return{favouriteIDs:r,onBookmark:(n,o)=>{t({type:o?"remove":"add",id:n})},clearFavourites:()=>t({type:"clear",id:-1})}}const C=d.exports.createContext();function se({children:r}){const t=ae();return e(C.Provider,{value:t,children:r})}function S(){return d.exports.useContext(C)}var ce=T({palette:{primary:{main:I["900"],light:"#534bae",dark:"#000051"},secondary:{main:L["500"],light:"#6ec6ff",dark:"#0069c0"}}});const k="/HIST130-Quiz/",le=R.create({baseURL:k,headers:{"Content-Type":"application/json",Accept:"application/json"}});async function v(r){return await le.get(r).then(n=>n.data)}function ue(){return m("chapters",()=>v("/chapters.json"))}const de=new N({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnMount:!1}}});function F(r){return r===void 0?m("definitions",()=>v("/definitions.json")):m(["definitions",r],()=>v("/definitions.json").then(t=>t==null?void 0:t.filter(n=>n.chapterId===r)))}function fe(){return e(l,{variant:"subtitle1",component:"h2",sx:{flexGrow:1},children:"Made with \u2764\uFE0F by Haltarys!"})}function he(){const r=x();return c(Q,{value:r.pathname,indicatorColor:"secondary",variant:"fullWidth",textColor:"inherit",component:"nav",children:[e(f,{value:"/",label:"Reference",component:u,to:"/"}),e(f,{value:"/favourites",label:"Favourites",component:u,to:"/favourites"}),e(f,{value:"/quiz",label:"Quiz",component:u,to:"/quiz"})]})}function me(){return e(l,{variant:"h6",sx:{flexGrow:1},component:"h1",children:e(B,{color:"inherit",underline:"none",component:u,to:"/",children:"HIST 130 Quiz"})})}function pe(){return e(g,{title:"View the source code on Github!",children:e(b,{size:"large",color:"inherit",href:"https://github.com/Haltarys/HIST130-Quiz",target:"_blank",children:e(H,{})})})}function ve(){return c(D,{position:"sticky",children:[c(O,{children:[e(me,{}),e(fe,{}),e(g,{title:"Send Feedback",children:e(b,{size:"large",color:"inherit",component:u,to:"/feedback",children:e(E,{})})}),e(pe,{})]}),e(he,{})]})}function ge({children:r,location:t}){t=t||x();const n=j(r),o=$(n,t),i=n.findIndex(a=>a===(o==null?void 0:o[0].route));return c(q,{index:i+1,children:[e("div",{children:"No match!"}),n.map(a=>e(d.exports.Fragment,{children:a.element},a.path))]})}function w({header:r,children:t}){return c(p,{container:!0,spacing:2,padding:2,paddingBottom:4,children:[e(p,{item:!0,xs:12,children:typeof r=="string"?e(l,{variant:"h4",children:r}):r}),t]})}function z({definition:r,subheader:t,isFavourite:n,onBookmark:o}){return e(p,{item:!0,xs:12,sm:6,md:4,lg:3,children:c(A,{sx:{backgroundColor:P["100"]},children:[e(M,{title:r.term,subheader:t}),e(G,{children:e(l,{variant:"body2",color:"text.secondary",children:r.text||"lorem ipsum dolor sit amet conspicing delectetur."})}),e(_,{children:e(g,{title:n?"Remove from Favourites":"Add to Favourites",children:e(b,{size:"large",onClick:()=>o(r.id,n),color:n?"secondary":"default",children:n?e(J,{fontSize:"large"}):e(W,{fontSize:"large"})})})})]})})}function be(){const{isLoading:r,error:t,data:n}=F(),{favouriteIDs:o,onBookmark:i}=S(),a=n==null?void 0:n.filter(s=>o.includes(s.id));return r?e("div",{children:"loading favourite definitions..."}):t?c("div",{children:["Error: ",t.message]}):e(w,{header:"Favourites",children:a===void 0?e("div",{children:"loading..."}):a.map(s=>e(z,{definition:s,subheader:`chapter.title (page ${s.pageNumber})`,isFavourite:o.includes(s.id),onBookmark:i},s.id))})}function ye(){return e("div",{children:"Quiz"})}function xe({chapter:r}){return c(y,{children:[c(l,{variant:"h4",children:[r.title,": ",r.subtitle]}),c(l,{variant:"body1",children:[r.period," (page ",r.pageNumber,")"]})]})}function Ce({chapter:r}){const{isLoading:t,error:n,data:o}=F(r.id),{favouriteIDs:i,onBookmark:a}=S();return t?c("div",{children:["loading definitions for ",r.title,"..."]}):n?c("div",{children:["Error: ",n.message]}):e(w,{header:e(xe,{chapter:r}),children:o==null?void 0:o.map(s=>e(z,{definition:s,subheader:`${r.title} (page ${s.pageNumber})`,isFavourite:i.includes(s.id),onBookmark:a},s.id))})}function Se(){const{isLoading:r,error:t,data:n}=ue();return r?e("div",{children:"loading chapters..."}):t?c("div",{children:["Error: ",t.message]}):e(y,{children:n==null?void 0:n.map(o=>e(Ce,{chapter:o},o.id))})}function ke(){return e(K,{maxWidth:"xl",component:"main",children:c(ge,{children:[e(h,{path:"/",element:e(Se,{})}),e(h,{path:"/favourites",element:e(be,{})}),e(h,{path:"/quiz",element:e(ye,{})})]})})}function Fe(){return c(y,{children:[e(ve,{}),e(ke,{}),e(V.exports.ReactQueryDevtools,{})]})}U.render(e(X.StrictMode,{children:e(Y,{basename:k,children:e(Z,{children:e(ee,{theme:ce,children:e(re,{client:de,children:e(se,{children:e(Fe,{})})})})})})}),document.getElementById("root"));
